<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="https://raw.githubusercontent.com/chnjames/cloudImg/main/blog/202206141707606.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-PF50YMCFTR"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-PF50YMCFTR');</script><title>Vite2+Vue3+TS+Pinia搭建项目 | 一点一木前端进阶</title><meta name="description" content="一点一木的网站，专注与前端技术的分享！">
    <link rel="modulepreload" href="/blog/assets/app.65b6550c.js"><link rel="modulepreload" href="/blog/assets/vite_vue3_ts.html.f4cc8fdd.js"><link rel="modulepreload" href="/blog/assets/vite_vue3_ts.html.72418083.js"><link rel="prefetch" href="/blog/assets/index.html.6bdf919a.js"><link rel="prefetch" href="/blog/assets/index.html.d055893c.js"><link rel="prefetch" href="/blog/assets/distance.html.50981d3a.js"><link rel="prefetch" href="/blog/assets/index.html.41c2bfa2.js"><link rel="prefetch" href="/blog/assets/base.html.5a72dd83.js"><link rel="prefetch" href="/blog/assets/canvas.html.067137aa.js"><link rel="prefetch" href="/blog/assets/experience.html.e5ddc513.js"><link rel="prefetch" href="/blog/assets/git.html.9259e06d.js"><link rel="prefetch" href="/blog/assets/pinia.html.06409671.js"><link rel="prefetch" href="/blog/assets/vue3.html.a17f62f8.js"><link rel="prefetch" href="/blog/assets/GithubCopilot.html.5ab5eb8c.js"><link rel="prefetch" href="/blog/assets/index.html.76a50732.js"><link rel="prefetch" href="/blog/assets/recommend.html.9b24bd03.js"><link rel="prefetch" href="/blog/assets/tutorial.html.dae1f412.js"><link rel="prefetch" href="/blog/assets/index.html.8fc0df75.js"><link rel="prefetch" href="/blog/assets/honor.html.befcbd17.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.b6f573ff.js"><link rel="prefetch" href="/blog/assets/index.html.b933f498.js"><link rel="prefetch" href="/blog/assets/css.html.7172fe34.js"><link rel="prefetch" href="/blog/assets/vue.html.f47afc39.js"><link rel="prefetch" href="/blog/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/blog/assets/index.html.c2aa991d.js"><link rel="prefetch" href="/blog/assets/index.html.c2a903d7.js"><link rel="prefetch" href="/blog/assets/distance.html.bf5c3cda.js"><link rel="prefetch" href="/blog/assets/index.html.70ddf336.js"><link rel="prefetch" href="/blog/assets/base.html.3752748b.js"><link rel="prefetch" href="/blog/assets/canvas.html.a576087f.js"><link rel="prefetch" href="/blog/assets/experience.html.ea69f109.js"><link rel="prefetch" href="/blog/assets/git.html.b5a30e6e.js"><link rel="prefetch" href="/blog/assets/pinia.html.ae93577b.js"><link rel="prefetch" href="/blog/assets/vue3.html.a9bae806.js"><link rel="prefetch" href="/blog/assets/GithubCopilot.html.fe1fd084.js"><link rel="prefetch" href="/blog/assets/index.html.fcb93ec3.js"><link rel="prefetch" href="/blog/assets/recommend.html.d2ad20bd.js"><link rel="prefetch" href="/blog/assets/tutorial.html.e91f337a.js"><link rel="prefetch" href="/blog/assets/index.html.9ca995be.js"><link rel="prefetch" href="/blog/assets/honor.html.59c803e5.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.ead57768.js"><link rel="prefetch" href="/blog/assets/index.html.646129ca.js"><link rel="prefetch" href="/blog/assets/css.html.74e3d910.js"><link rel="prefetch" href="/blog/assets/vue.html.7ece9132.js"><link rel="prefetch" href="/blog/assets/404.html.a14c78b8.js"><link rel="prefetch" href="/blog/assets/404.9f308604.js"><link rel="prefetch" href="/blog/assets/Layout.9e8e41b0.js">
    <link rel="stylesheet" href="/blog/assets/style.c50b481d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name">一点一木前端进阶</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/reference/" class="router-link-active" aria-label="前端进阶"><!--[--><!--]--> 前端进阶 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/topic/" class="" aria-label="面试宝典"><!--[--><!--]--> 面试宝典 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/software/" class="" aria-label="软件推荐"><!--[--><!--]--> 软件推荐 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/future/" class="" aria-label="前方的路"><!--[--><!--]--> 前方的路 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/chnjames" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/reference/" class="router-link-active" aria-label="前端进阶"><!--[--><!--]--> 前端进阶 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/topic/" class="" aria-label="面试宝典"><!--[--><!--]--> 面试宝典 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/software/" class="" aria-label="软件推荐"><!--[--><!--]--> 软件推荐 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/future/" class="" aria-label="前方的路"><!--[--><!--]--> 前方的路 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/chnjames" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/blog/reference/base.html" class="sidebar-item sidebar-heading" aria-label="前端图谱"><!--[--><!--]--> 前端图谱 <!--[--><!--]--></a><!----></li><li><a href="/blog/reference/experience.html" class="sidebar-item sidebar-heading" aria-label="项目实践问题"><!--[--><!--]--> 项目实践问题 <!--[--><!--]--></a><!----></li><li><a href="/blog/reference/vue3.html" class="sidebar-item sidebar-heading" aria-label="Vue3 新特性及使用经验总结"><!--[--><!--]--> Vue3 新特性及使用经验总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Vite2+Vue3+TS+Pinia搭建项目"><!--[--><!--]--> Vite2+Vue3+TS+Pinia搭建项目 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#搭建前准备" class="router-link-active router-link-exact-active sidebar-item" aria-label="搭建前准备"><!--[--><!--]--> 搭建前准备 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#vue2-与-vue3-的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vue2 与 Vue3 的区别"><!--[--><!--]--> Vue2 与 Vue3 的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#介绍-vite" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍 vite"><!--[--><!--]--> 介绍 vite <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#使用-vite-快速创建脚手架" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 vite 快速创建脚手架"><!--[--><!--]--> 使用 vite 快速创建脚手架 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#约束代码风格" class="router-link-active router-link-exact-active sidebar-item" aria-label="约束代码风格"><!--[--><!--]--> 约束代码风格 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#配置-css-预处理器-scss" class="router-link-active router-link-exact-active sidebar-item" aria-label="配置 css 预处理器 scss"><!--[--><!--]--> 配置 css 预处理器 scss <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由"><!--[--><!--]--> 路由 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#统一请求封装" class="router-link-active router-link-exact-active sidebar-item" aria-label="统一请求封装"><!--[--><!--]--> 统一请求封装 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#状态管理-pinia" class="router-link-active router-link-exact-active sidebar-item" aria-label="状态管理 Pinia"><!--[--><!--]--> 状态管理 Pinia <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#环境变量配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="环境变量配置"><!--[--><!--]--> 环境变量配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#使用组件库-naive-ui" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用组件库 Naive UI"><!--[--><!--]--> 使用组件库 Naive UI <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#vite-常用基础配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vite 常用基础配置"><!--[--><!--]--> Vite 常用基础配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#常用插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用插件"><!--[--><!--]--> 常用插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/reference/vite_vue3_ts.html#非常推荐使用的-hooks-库" class="router-link-active router-link-exact-active sidebar-item" aria-label="非常推荐使用的 hooks 库"><!--[--><!--]--> 非常推荐使用的 hooks 库 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/blog/reference/git.html" class="sidebar-item sidebar-heading" aria-label="Git操作手册"><!--[--><!--]--> Git操作手册 <!--[--><!--]--></a><!----></li><li><a href="/blog/reference/pinia.html" class="sidebar-item sidebar-heading" aria-label="Pinia的使用"><!--[--><!--]--> Pinia的使用 <!--[--><!--]--></a><!----></li><li><a href="/blog/reference/canvas.html" class="sidebar-item sidebar-heading" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="vite2-vue3-typescript-pinia-搭建项目" tabindex="-1"><a class="header-anchor" href="#vite2-vue3-typescript-pinia-搭建项目" aria-hidden="true">#</a> Vite2 + Vue3 + TypeScript + Pinia 搭建项目</h1><h3 id="搭建前准备" tabindex="-1"><a class="header-anchor" href="#搭建前准备" aria-hidden="true">#</a> 搭建前准备</h3><ol><li><code>Vscode</code>: 前端人必备写码神器</li><li><code>Chrome</code>：对开发者非常友好的浏览器(反正我是很依赖它的)</li><li><code>Nodejs</code>&amp;<code>npm</code>：配置本地开发环境，安装 Node 后你会发现 npm 也会一起安装下来</li><li><code>Vue.js devtools</code>：浏览器调试插件</li><li><code>Vue Language Features (Volar)</code>：Vscode 开发 vue3 必备插件，提供语法高亮提示，非常好用</li><li><code>Vue 3 Snippets</code>：vue3 快捷输入</li></ol><h3 id="vue2-与-vue3-的区别" tabindex="-1"><a class="header-anchor" href="#vue2-与-vue3-的区别" aria-hidden="true">#</a> Vue2 与 Vue3 的区别</h3><p><code>Vue3</code>由于完全由<code>TS</code>进行重写，在应用中对类型判断的定义和使用有很强的表现。同一对象的多个键返回值必须通过定义对应的接口（<code>interface</code>）来进行类型定义。要不然在 ESLint 时都会报错。</p><p><code>vue2</code> 的双向数据绑定是利用 <code>ES5</code> 的一个 <code>API Object.definePropert()</code>对数据进行劫持 结合 <code>发布订阅</code>模式的方式来实现的。<code>Vue3</code> 中使用了 <code>es6</code> 的 <code>ProxyAPI</code> 对数据代理。</p><p><code>Vue3</code>支持碎片(<code>Fragments</code>)</p><p>Vue2 与 Vue3 最大的区别: Vue2 使用<code>Options API</code>而 Vue3 使用的<code>Composition API</code></p><p>生命周期钩子变化：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue2 <span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span> vue3
beforeCreate  <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
created       <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
beforeMount   <span class="token operator">-</span><span class="token operator">&gt;</span> onBeforeMount
mounted       <span class="token operator">-</span><span class="token operator">&gt;</span> onMounted
beforeUpdate  <span class="token operator">-</span><span class="token operator">&gt;</span> onBeforeUpdate
updated       <span class="token operator">-</span><span class="token operator">&gt;</span> onUpdated
beforeDestroy <span class="token operator">-</span><span class="token operator">&gt;</span> onBeforeUnmount
destroyed     <span class="token operator">-</span><span class="token operator">&gt;</span> onUnmounted
activated     <span class="token operator">-</span><span class="token operator">&gt;</span> onActivated
deactivated   <span class="token operator">-</span><span class="token operator">&gt;</span> onDeactivated

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="介绍-vite" tabindex="-1"><a class="header-anchor" href="#介绍-vite" aria-hidden="true">#</a> 介绍 vite</h3><blockquote><p>Vite：下一代前端开发与构建工具</p></blockquote><ul><li>💡 极速的开发服务器启动</li><li>⚡️ 轻量快速的热模块重载（HMR）</li><li>🛠️ 丰富的功能</li><li>📦 自带优化的构建</li><li>🔩 通用的插件接口</li><li>🔑 完全类型化的 API</li></ul><p><code>Vite</code> （法语意为 “迅速”，发音 /vit/）是一种全新的前端构建工具，它极大地改善了前端开发体验。</p><p>它主要由两部分组成：</p><ul><li>一个开发服务器，它基于 原生 <code>ES</code> 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）。</li><li>一套构建指令，它使用 <code>Rollup</code> 打包你的代码，并且它是预配置的，可以输出用于生产环境的优化过的静态资源。</li><li>Vite 意在提供开箱即用的配置，同时它的 插件 API 和 JavaScript API 带来了高度的<code>可扩展性</code>，并有完整的类型支持。</li></ul><h3 id="使用-vite-快速创建脚手架" tabindex="-1"><a class="header-anchor" href="#使用-vite-快速创建脚手架" aria-hidden="true">#</a> 使用 vite 快速创建脚手架</h3><blockquote><p>兼容性注意:Vite 需要 <code>Node.js</code> 版本 <code>&gt;= 12.0.0</code>。</p></blockquote><ol><li><p>第一步：在需要创建项目文件目录下打开 <code>cmd</code> 运行以下命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># npm 6.x</span>
<span class="token function">npm</span> init @vitejs/app vite_vue3_ts --template

<span class="token comment"># npm 7+, 需要额外的双横线：</span>
<span class="token function">npm</span> init @vitejs/app vite_vue3_ts -- --template

<span class="token comment"># yarn</span>
<span class="token function">yarn</span> create @vitejs/app vite_vue3_ts --template
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>第二步：选择 <code>vue</code>回车 =&gt; <code>vue-ts</code>回车</p></li><li><p>第三步：<code>cd</code> 到项目文件夹,安装依赖,启动项目</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 进入项目文件夹</span>
<span class="token builtin class-name">cd</span> vite_vue3_ts
<span class="token comment"># 安装依赖</span>
<span class="token function">npm</span> i
<span class="token comment"># 启动</span>
<span class="token function">npm</span> run dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="约束代码风格" tabindex="-1"><a class="header-anchor" href="#约束代码风格" aria-hidden="true">#</a> 约束代码风格</h3><h4 id="eslint-支持" tabindex="-1"><a class="header-anchor" href="#eslint-支持" aria-hidden="true">#</a> Eslint 支持</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># eslint 安装</span>
<span class="token function">npm</span> i eslint --dev
<span class="token comment"># eslint 插件安装</span>
<span class="token function">npm</span> i eslint-plugin-vue --dev

<span class="token function">npm</span> i @typescript-eslint/eslint-plugin --dev

<span class="token function">npm</span> i eslint-plugin-prettier --dev

<span class="token comment"># typescript parser</span>
<span class="token function">npm</span> i @typescript-eslint/parser --dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="项目下新建-eslintrc-js" tabindex="-1"><a class="header-anchor" href="#项目下新建-eslintrc-js" aria-hidden="true">#</a> 项目下新建 .eslintrc.js</h4><blockquote><p>配置 <code>eslint</code> 校验规则：</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;vue-eslint-parser&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:vue/vue3-recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:@typescript-eslint/recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:prettier/recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// eslint-config-prettier 的缩写</span>
    <span class="token string">&#39;prettier&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;@typescript-eslint/parser&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// eslint-plugin-vue @typescript-eslint/eslint-plugin eslint-plugin-prettier的缩写</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@typescript-eslint&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;prettier&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;@typescript-eslint/ban-ts-ignore&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/explicit-function-return-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-explicit-any&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-var-requires&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-empty-function&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-use-before-define&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/ban-ts-comment&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/ban-types&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-non-null-assertion&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/explicit-module-boundary-types&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-var&#39;</span><span class="token operator">:</span> <span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;prettier/prettier&#39;</span><span class="token operator">:</span> <span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现console</span>
    <span class="token string-property property">&#39;no-console&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用debugger</span>
    <span class="token string-property property">&#39;no-debugger&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现重复的 case 标签</span>
    <span class="token string-property property">&#39;no-duplicate-case&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现空语句块</span>
    <span class="token string-property property">&#39;no-empty&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止不必要的括号</span>
    <span class="token string-property property">&#39;no-extra-parens&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止对 function 声明重新赋值</span>
    <span class="token string-property property">&#39;no-func-assign&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在 return、throw、continue 和 break 语句之后出现不可达代码</span>
    <span class="token string-property property">&#39;no-unreachable&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制所有控制语句使用一致的括号风格</span>
    <span class="token literal-property property">curly</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求 switch 语句中有 default 分支</span>
    <span class="token string-property property">&#39;default-case&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制尽可能地使用点号</span>
    <span class="token string-property property">&#39;dot-notation&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求使用 === 和 !==</span>
    <span class="token literal-property property">eqeqeq</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止 if 语句中 return 语句之后有 else 块</span>
    <span class="token string-property property">&#39;no-else-return&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现空函数</span>
    <span class="token string-property property">&#39;no-empty-function&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用不必要的嵌套块</span>
    <span class="token string-property property">&#39;no-lone-blocks&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止使用多个空格</span>
    <span class="token string-property property">&#39;no-multi-spaces&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止多次声明同一变量</span>
    <span class="token string-property property">&#39;no-redeclare&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在 return 语句中使用赋值语句</span>
    <span class="token string-property property">&#39;no-return-assign&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用不必要的 return await</span>
    <span class="token string-property property">&#39;no-return-await&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止自我赋值</span>
    <span class="token string-property property">&#39;no-self-assign&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止自身比较</span>
    <span class="token string-property property">&#39;no-self-compare&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止不必要的 catch 子句</span>
    <span class="token string-property property">&#39;no-useless-catch&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止多余的 return 语句</span>
    <span class="token string-property property">&#39;no-useless-return&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止变量声明与外层作用域的变量同名</span>
    <span class="token string-property property">&#39;no-shadow&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 允许delete变量</span>
    <span class="token string-property property">&#39;no-delete-var&#39;</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制数组方括号中使用一致的空格</span>
    <span class="token string-property property">&#39;array-bracket-spacing&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在代码块中使用一致的大括号风格</span>
    <span class="token string-property property">&#39;brace-style&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用骆驼拼写法命名约定</span>
    <span class="token literal-property property">camelcase</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用一致的缩进</span>
    <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token string">&#39;off&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在 JSX 属性中一致地使用双引号或单引号</span>
    <span class="token comment">// &#39;jsx-quotes&#39;: &#39;warn&#39;,</span>
    <span class="token comment">// 强制可嵌套的块的最大深度4</span>
    <span class="token string-property property">&#39;max-depth&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制最大行数 300</span>
    <span class="token comment">// &quot;max-lines&quot;: [&quot;warn&quot;, { &quot;max&quot;: 1200 }],</span>
    <span class="token comment">// 强制函数最大代码行数 50</span>
    <span class="token comment">// &#39;max-lines-per-function&#39;: [&#39;warn&#39;, { max: 70 }],</span>
    <span class="token comment">// 强制函数块最多允许的的语句数量20</span>
    <span class="token string-property property">&#39;max-statements&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制回调函数最大嵌套深度</span>
    <span class="token string-property property">&#39;max-nested-callbacks&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制函数定义中最多允许的参数数量</span>
    <span class="token string-property property">&#39;max-params&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制每一行中所允许的最大语句数量</span>
    <span class="token string-property property">&#39;max-statements-per-line&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求方法链中每个调用都有一个换行符</span>
    <span class="token string-property property">&#39;newline-per-chained-call&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">ignoreChainWithDepth</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止 if 作为唯一的语句出现在 else 语句中</span>
    <span class="token string-property property">&#39;no-lonely-if&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止空格和 tab 的混合缩进</span>
    <span class="token string-property property">&#39;no-mixed-spaces-and-tabs&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现多行空行</span>
    <span class="token string-property property">&#39;no-multiple-empty-lines&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止出现;</span>
    <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;never&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在块之前使用一致的空格</span>
    <span class="token string-property property">&#39;space-before-blocks&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在 function的左括号之前使用一致的空格</span>
    <span class="token comment">// &#39;space-before-function-paren&#39;: [&#39;warn&#39;, &#39;never&#39;],</span>
    <span class="token comment">// 强制在圆括号内使用一致的空格</span>
    <span class="token string-property property">&#39;space-in-parens&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求操作符周围有空格</span>
    <span class="token string-property property">&#39;space-infix-ops&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在一元操作符前后使用一致的空格</span>
    <span class="token string-property property">&#39;space-unary-ops&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制在注释中 // 或 /* 使用一致的空格</span>
    <span class="token comment">// &quot;spaced-comment&quot;: &quot;warn&quot;,</span>
    <span class="token comment">// 强制在 switch 的冒号左右有空格</span>
    <span class="token string-property property">&#39;switch-colon-spacing&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制箭头函数的箭头前后使用一致的空格</span>
    <span class="token string-property property">&#39;arrow-spacing&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-var&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;prefer-const&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;prefer-rest-params&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-useless-escape&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-irregular-whitespace&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-prototype-builtins&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-fallthrough&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-extra-boolean-cast&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-case-declarations&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;no-async-promise-executor&#39;</span><span class="token operator">:</span> <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">defineProps</span><span class="token operator">:</span> <span class="token string">&#39;readonly&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defineEmits</span><span class="token operator">:</span> <span class="token string">&#39;readonly&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">defineExpose</span><span class="token operator">:</span> <span class="token string">&#39;readonly&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">withDefaults</span><span class="token operator">:</span> <span class="token string">&#39;readonly&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="项目下新建-eslintignore" tabindex="-1"><a class="header-anchor" href="#项目下新建-eslintignore" aria-hidden="true">#</a> 项目下新建 .eslintignore</h4><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># eslint 忽略检查 (根据项目需要自行添加)</span>
node_modules
dist
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="prettier-支持" tabindex="-1"><a class="header-anchor" href="#prettier-支持" aria-hidden="true">#</a> prettier 支持</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装 prettier</span>
<span class="token function">npm</span> i prettier --dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="解决-eslint-和-prettier-冲突" tabindex="-1"><a class="header-anchor" href="#解决-eslint-和-prettier-冲突" aria-hidden="true">#</a> 解决 eslint 和 prettier 冲突</h4><blockquote><p>解决 <code>ESLint</code> 中的样式规范和 <code>prettier</code> 中样式规范的<code>冲突</code>，以 <code>prettier</code> 的样式规范<code>为准</code>，使 ESLint 中的样式规范自动失效</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装插件 eslint-config-prettier</span>
<span class="token function">npm</span> i eslint-config-prettier --dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="项目下新建-prettierrc-js" tabindex="-1"><a class="header-anchor" href="#项目下新建-prettierrc-js" aria-hidden="true">#</a> 项目下新建 .prettierrc.js</h4><blockquote><p>配置 <code>prettier</code> 格式化规则：</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">jsxSingleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">jsxBracketSameLine</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token string">&#39;*.json&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arrowParens</span><span class="token operator">:</span> <span class="token string">&#39;always&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="项目下新建-prettierignore" tabindex="-1"><a class="header-anchor" href="#项目下新建-prettierignore" aria-hidden="true">#</a> 项目下新建 .prettierignore</h4><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 忽略格式化文件 (根据项目需要自行添加)</span>
node_modules
dist
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="package-json-配置" tabindex="-1"><a class="header-anchor" href="#package-json-配置" aria-hidden="true">#</a> package.json 配置</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --fix --ext .ts,.tsx,.vue,.js,.jsx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier --write .&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面配置完成后,可以运行以下<code>命令</code>测试下代码检查个<code>格式化</code>效果：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># eslint 检查</span>
<span class="token function">npm</span> run lint
<span class="token comment"># prettier 自动格式化</span>
<span class="token function">npm</span> run prettier
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置-husky-lint-staged" tabindex="-1"><a class="header-anchor" href="#配置-husky-lint-staged" aria-hidden="true">#</a> 配置 husky + lint-staged</h4><blockquote><p>使用<code>husky</code> + <code>lint-staged</code>助力团队编码规范, husky&amp;lint-staged 安装推荐使用 <code>mrm</code>, 它将根据 <code>package.json</code> 依赖项中的代码质量工具来安装和配置 husky 和 lint-staged，因此请确保在此之前安装并配置所有代码质量工具，如 <code>Prettier 和 ESlint</code></p></blockquote><h4 id="首先安装-mrm" tabindex="-1"><a class="header-anchor" href="#首先安装-mrm" aria-hidden="true">#</a> 首先安装 mrm</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i mrm -D --registry<span class="token operator">=</span>https://registry.npm.taobao.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>husky</code> 是一个为 git 客户端增加 <code>hook</code> 的工具。安装后，它会自动在仓库中的 <code>.git/</code> 目录下增加相应的钩子；比如 <code>pre-commit</code> 钩子就会在你执行 <code>git commit</code> 的触发。</p><p>那么我们可以在 <code>pre-commit</code> 中实现一些比如 <code>lint 检查</code>、<code>单元测试</code>、<code>代码美化</code>等操作。当然，<code>pre-commit</code> 阶段执行的命令当然要保证其速度不要太慢，每次 commit 都等很久也不是什么好的体验。</p><p><code>lint-staged</code>，一个仅仅过滤出 Git 代码暂存区文件(被 <code>git add</code> 的文件)的工具；这个很实用，因为我们如果对整个项目的代码做一个检查，可能耗时很长，如果是老项目，要对之前的代码做一个代码规范检查并修改的话，这可能就麻烦了呀，可能导致项目改动很大。</p><p>所以这个 <code>lint-staged</code>，对团队项目和开源项目来说，是一个很好的工具，它是对个人要提交的代码的一个规范和约束。</p><h4 id="安装-lint-staged" tabindex="-1"><a class="header-anchor" href="#安装-lint-staged" aria-hidden="true">#</a> 安装 lint-staged</h4><blockquote><p><code>mrm</code> 安装 <code>lint-staged</code> 会<code>自动</code>把 <code>husky</code> 一起安装下来</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx mrm lint-staged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装成功后会发现 <code>package.json</code> 中多了一下几个配置。</p><p>因为我们要结合 <code>prettier</code> 代码格式化，所有修改一下配置：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js,jsx,vue,ts,tsx}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;yarn lint&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;git add&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>好了，到这里代码格式化配置基本大功告成了！！！</p><p>可以修改部分代码尝试 <code>git commit</code> ,你会发现代码将自动格式化。</p><h4 id="配置文件引用别名-alias" tabindex="-1"><a class="header-anchor" href="#配置文件引用别名-alias" aria-hidden="true">#</a> 配置文件引用别名 alias</h4><blockquote><p>直接修改 <code>vite.config.ts</code> 文件配置</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&#39;@vitejs/plugin-vue&#39;</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;@&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若在配置别名时报错：提示找不到模块<code>path</code>或其相应的类型声明 或者 找不到名称<code>__dirname</code>等提示，则需要安装<code>@types/node</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @types/node --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>修改 <code>tsconfig.json</code></p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置-css-预处理器-scss" tabindex="-1"><a class="header-anchor" href="#配置-css-预处理器-scss" aria-hidden="true">#</a> 配置 css 预处理器 scss</h3><blockquote><p>虽然 <code>vite</code> 原生支持 <code>less/sass/scss/stylus</code>，但是你必须手动安装他们的预处理器依赖</p></blockquote><h4 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i dart-sass --dev
<span class="token function">npm</span> i sass --dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置全局-scss-样式文件" tabindex="-1"><a class="header-anchor" href="#配置全局-scss-样式文件" aria-hidden="true">#</a> 配置全局 scss 样式文件</h4><p>在 <code>src/assets</code> 下新增 <code>style</code> 文件夹，用于存放全局样式文件</p><p>新建 <code>main.scss</code>, 设置一个用于测试的颜色<code>变量</code> ：</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token property"><span class="token variable">$background-color</span></span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如何将这个全局样式文件<code>全局注入</code>到项目中呢？配置 <code>Vite</code> 即可：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">css</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span><span class="token string">&#39;@import &quot;@/assets/style/main.scss&quot;;&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="组件中使用" tabindex="-1"><a class="header-anchor" href="#组件中使用" aria-hidden="true">#</a> 组件中使用</h4><blockquote><p>不需要任何引入可以直接使用全局<code>scss</code>定义的变量</p></blockquote><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.container</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$background-color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由" tabindex="-1"><a class="header-anchor" href="#路由" aria-hidden="true">#</a> 路由</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装路由</span>
<span class="token function">npm</span> i vue-router@4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>src</code> 文件下新增 <code>router</code> 文件夹 =&gt; <code>index.ts</code> 文件,内容如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">,</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> <span class="token literal-property property">routes</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/pages/login/Login.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 注意这里要带上 文件后缀.vue</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改入口文件 <code>main.ts</code> ：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&#39;./router&#39;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>到这里路由的基础配置已经完成了,更多配置信息可以查看 <code>vue-router</code><a href="https://next.router.vuejs.org/zh/guide/" target="_blank" rel="noopener noreferrer">官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a> 。</p><p><code>vue-router4.x</code> 支持 <code>typescript</code>，配置路由的类型是 <code>RouteRecordRaw</code>，这里 <code>meta</code> 可以让我们有更多的发挥空间，这里提供一些参考：</p><p><code>title</code>:<code>string</code>; 页面标题，通常必选。</p><p><code>icon?</code>:<code>string</code>; 图标，一般配合菜单使用。</p><p><code>auth?</code>:<code>boolean</code>; 是否需要登录权限。</p><p><code>ignoreAuth?</code>:<code>boolean</code>; 是否忽略权限。</p><p><code>roles?</code>:<code>RoleEnum[]</code>; 可以访问的角色</p><p><code>keepAlive?</code>:<code>boolean</code>; 是否开启页面缓存</p><p><code>hideMenu?</code>:<code>boolean</code>; 有些路由我们并不想在菜单中显示，比如某些编辑页面。</p><p><code>order?</code>:<code>number</code>; 菜单排序。</p><p><code>frameUrl?</code>:<code>string</code>; 嵌套外链。</p><blockquote><p>这里只提供一些思路，每个项目涉及到的业务都会存在些差异，这里就不作详细讲解了，根据自己业务需求做配置即可。</p></blockquote><h3 id="统一请求封装" tabindex="-1"><a class="header-anchor" href="#统一请求封装" aria-hidden="true">#</a> 统一请求封装</h3><blockquote><p>使用过 vue2.x 的同学应该对 axios 很熟悉了，这里我们直接使用 axios 做封装：</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装 axios</span>
<span class="token function">npm</span> i axios
<span class="token comment"># 安装 nprogress 用于请求 loading</span>
<span class="token comment"># 也可以根据项目需求自定义其它 loading</span>
<span class="token function">npm</span> i nprogress
<span class="token comment"># 类型声明，或者添加一个包含 `declare module &#39;nprogress&#39;</span>
<span class="token function">npm</span> i @types/nprogress --dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实际使用中可以根据项目修改，比如<code>RESTful</code> <code>api</code>中可以自行添加<code>put</code>和<code>delete</code>请求，<code>ResType</code>也可以根据后端的通用返回值动态的去修改。</p><p>新增 <code>service</code> 文件夹，<code>service</code> 下新增 <code>http.ts</code> 文件以及 <code>api</code> 文件夹：</p><p><code>http.ts</code> : 用于<code>axios</code>封装</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//http.ts</span>
<span class="token keyword">import</span> axios<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">&#39;nprogress&#39;</span>

<span class="token comment">// 设置请求头和请求路径</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#39;/api&#39;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;application/json;charset=UTF-8&#39;</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token operator">:</span> AxiosRequestConfig<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//@ts-ignore</span>
      config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>token <span class="token operator">=</span> token
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> error
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">// 响应拦截</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">111</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">// token过期操作</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">interface</span> <span class="token class-name">ResType</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> number
  data<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span>
  <span class="token literal-property property">msg</span><span class="token operator">:</span> string
  err<span class="token operator">?</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  get<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> string<span class="token punctuation">,</span> params<span class="token operator">?</span><span class="token operator">:</span> unknown<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>ResType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span>
  post<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> string<span class="token punctuation">,</span> params<span class="token operator">?</span><span class="token operator">:</span> unknown<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>ResType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span>
  upload<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>url<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> unknown<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>ResType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span>
  <span class="token function">download</span><span class="token punctuation">(</span>url<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">http</span><span class="token operator">:</span> Http <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      axios
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">post</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      axios
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      axios
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> file<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;multipart/form-data&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;iframe&#39;</span><span class="token punctuation">)</span>
    iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span>
    iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> url
    iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> http
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>api</code> : 项目中接口做统一管理，按照模块来划分</p><p>在 <code>api</code> 文件下新增 <code>login</code> 文件夹,用于存放登录模块的请求接口,login 文件夹下分别新增 <code>login.ts</code>和 <code>types.ts</code></p><p><code>login.ts</code>：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&#39;@/service/http&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">T</span> <span class="token keyword">from</span> <span class="token string">&#39;./types&#39;</span>

<span class="token keyword">const</span> loginApi<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">.</span>ILoginApi <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">login</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> loginApi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>types.ts</code>：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ILoginParams</span> <span class="token punctuation">{</span>
    userName<span class="token operator">:</span> <span class="token builtin">string</span>
    passWord<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ILoginApi</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">login</span><span class="token operator">:</span> <span class="token punctuation">(</span>params<span class="token operator">:</span> ILoginParams<span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>至此，一个简单地请求封装完成了！！！</p><p>除了自己手动封装 axios ，这里还推荐一个 vue3 的请求库: <a href="/blog/reference/www.attojs.com/" class="">VueRequest</a>，非常好用，下面来看看 <code>VueRequest</code>有哪些比较好用的功能吧！！！</p><p>🚀 所有数据都具有响应式</p><p>🔄 轮询请求</p><p>🤖 自动处理错误重试</p><p>🗄 内置请求缓存</p><p>💧 节流请求与防抖请求</p><p>🎯 聚焦页面时自动重新请求</p><p>⚙️ 强大的分页扩展以及加载更多扩展</p><p>📠 完全使用 Typescript 编写，具有强大的类型提示</p><p>⚡️ 兼容 Vite</p><p>🍃 轻量化</p><p>📦 开箱即用</p><h3 id="状态管理-pinia" tabindex="-1"><a class="header-anchor" href="#状态管理-pinia" aria-hidden="true">#</a> 状态管理 Pinia</h3><blockquote><p>由于 vuex 4 对 typescript 的支持让人感到难过，所以状态管理弃用了 VueX 而采取了 Pinia。 Pinia 的作者是 Vue 核心团队成员。</p></blockquote><p>尤大好像说 <code>Pinia</code> 可能会代替 <code>VueX</code>，所以请放心使用。</p><h4 id="安装-pinia" tabindex="-1"><a class="header-anchor" href="#安装-pinia" aria-hidden="true">#</a> 安装 Pinia</h4><p>Pinia 与 Vuex 的区别：</p><ul><li><code>id</code> 是必要的，它将所使用 store 连接到 devtools。</li><li>创建方式：<code>new Vuex.Store(...)</code>(vuex3)，<code>createStore(...)</code>(vuex4)。</li><li>对比于 vuex3 ，state 现在是一个<code>函数返回对象</code>。</li><li>没有 <code>mutations</code>，不用担心，state 的变化依然记录在 devtools 中。</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
<span class="token function">npm</span> i pinia@next
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>main.ts 中增加</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code># 引入
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span>
# 创建根存储库并将其传递给应用程序
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>src</code> 文件夹下新增 <code>store</code> 文件夹，接在在 store 中新增 <code>main.ts</code></p><p>创建 <code>store</code>，main.ts：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useMainStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;超级管理员&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组建中获取 store ：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{mainStore.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMainStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store/main&quot;</span>

<span class="token keyword">const</span> mainStore <span class="token operator">=</span> <span class="token function">useMainStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="getters-用法介绍" tabindex="-1"><a class="header-anchor" href="#getters-用法介绍" aria-hidden="true">#</a> getters 用法介绍</h4><blockquote><p>Pinia 中的 getter 与 Vuex 中的 getter 、组件中的计算属性具有相同的功能</p></blockquote><p><code>store</code> =&gt; <code>main.ts</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useMainStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;超级管理员&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// getters</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">nameLength</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>name<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组件中使用：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>用户名:{{ mainStore.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>长度:{{ mainStore.nameLength }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改store中的name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMainStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/store/main&#39;</span>

<span class="token keyword">const</span> mainStore <span class="token operator">=</span> <span class="token function">useMainStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">updateName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// $patch 修改 store 中的数据</span>
  mainStore<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;名称被修改了,nameLength也随之改变了&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="actions" tabindex="-1"><a class="header-anchor" href="#actions" aria-hidden="true">#</a> actions</h4><blockquote><p>这里与 <code>Vuex</code> 有极大的不同，<code>Pinia</code> 仅提供了一种方法来定义如何更改状态的规则，放弃 <code>mutations</code> 只依靠 <code>Actions</code>，这是一项重大的改变。</p></blockquote><p><code>Pinia</code> 让 <code>Actions</code> 更加的灵活：</p><ul><li>可以通过组件或其他 <code>action</code> 调用</li><li>可以从其他 <code>store</code> 的 <code>action</code> 中调用</li><li>直接在 <code>store</code> 实例上调用</li><li>支持<code>同步</code>或<code>异步</code></li><li>有任意数量的参数</li><li>可以包含有关如何更改状态的逻辑（也就是 vuex 的 mutations 的作用）</li><li>可以 <code>$patch</code> 方法直接更改状态属性</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useMainStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">&#39;main&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;超级管理员&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">nameLength</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>name<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">insertPost</span><span class="token punctuation">(</span>data<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 可以做异步</span>
      <span class="token comment">// await doAjaxRequest(data);</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="环境变量配置" tabindex="-1"><a class="header-anchor" href="#环境变量配置" aria-hidden="true">#</a> 环境变量配置</h3><blockquote><p><code>vite</code> 提供了两种模式：具有开发服务器的<code>开发模式</code>（development）和<code>生产模式</code>（production）</p></blockquote><p>项目根目录新建:<code>.env.development</code> ：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">NODE_ENV</span><span class="token punctuation">=</span><span class="token value attr-value">development</span>

<span class="token key attr-name">VITE_APP_WEB_URL</span><span class="token punctuation">=</span> <span class="token value attr-value">&#39;YOUR WEB URL&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>项目根目录新建:<code>.env.production</code> ：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">NODE_ENV</span><span class="token punctuation">=</span><span class="token value attr-value">production</span>

<span class="token key attr-name">VITE_APP_WEB_URL</span><span class="token punctuation">=</span> <span class="token value attr-value">&#39;YOUR WEB URL&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组件中使用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_APP_WEB_URL</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置 <code>package.json</code>：</p><blockquote><p>打包区分开发环境和生产环境</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;build:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode development&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;build:pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode production&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用组件库-naive-ui" tabindex="-1"><a class="header-anchor" href="#使用组件库-naive-ui" aria-hidden="true">#</a> 使用组件库 Naive UI</h3><blockquote><p>组件库选择，这里我们选择 <code>Naive UI</code> 至于为什么选择它？我可以直接说<code>尤大大</code>推荐的吗？</p></blockquote><ul><li>官方介绍： <ul><li>一个 <code>Vue 3</code> 组件库</li><li>比较完整，<code>主题可调</code>，使用 <code>TypeScript</code>，不算太慢</li><li>有点意思</li></ul></li></ul><p>介绍还是比较谦虚的，既然<code>尤大</code>推荐，肯定有它的优势了！！！</p><h4 id="安装-naive-ui" tabindex="-1"><a class="header-anchor" href="#安装-naive-ui" aria-hidden="true">#</a> 安装 Naive UI</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装 组件库</span>
<span class="token function">npm</span> i naive-ui
<span class="token comment"># 安装 字体</span>
<span class="token function">npm</span> i vfonts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="如何使用" tabindex="-1"><a class="header-anchor" href="#如何使用" aria-hidden="true">#</a> 如何使用</h4><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>import { NButton } from &quot;naive-ui&quot;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-button</span><span class="token punctuation">&gt;</span></span>naive-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="全局配置-config-provider" tabindex="-1"><a class="header-anchor" href="#全局配置-config-provider" aria-hidden="true">#</a> 全局配置 Config Provider</h4><blockquote><p>全局化配置设置内部组件的<code>主题</code>、<code>语言</code>和组件卸载于其他位置的 <code>DOM</code> 的类名。</p></blockquote><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>n-config-provider</span> <span class="token attr-name">:locale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhCN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>theme<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 容器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>n-config-provider</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>尤其是主题配置这个功能，我真的很喜欢 ❤️</p><blockquote><p>组件库选择上不做任何强制，根据自己的项目需要选择合适的组件库即可。</p></blockquote><h3 id="vite-常用基础配置" tabindex="-1"><a class="header-anchor" href="#vite-常用基础配置" aria-hidden="true">#</a> Vite 常用基础配置</h3><h4 id="基础配置" tabindex="-1"><a class="header-anchor" href="#基础配置" aria-hidden="true">#</a> 基础配置</h4><p><code>运行</code> <code>代理</code> 和 <code>打包</code> 配置</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>生产环境去除 <code>console</code> <code>debugger</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">build</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="生产环境生成-gz-文件" tabindex="-1"><a class="header-anchor" href="#生产环境生成-gz-文件" aria-hidden="true">#</a> 生产环境生成 .gz 文件</h4><blockquote><p>开启 <code>gzip</code> 可以极大的压缩静态资源，对页面加载的速度起到了显著的作用。</p></blockquote><p>使用 <code>vite-plugin-compression</code> 可以 <code>gzip</code> 或 <code>brotli</code> 的方式来压缩资源，这一步需要服务器端的配合，<code>vite</code> 只能帮你打包出 <code>.gz</code> 文件。此插件使用简单，你甚至无需配置参数，引入即可。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
<span class="token function">npm</span> i --dev vite-plugin-compression
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>plugins 中添加：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> viteCompression <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-compression&#39;</span>

<span class="token comment">// gzip压缩 生产环境生成 .gz 文件</span>
<span class="token function">viteCompression</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">verbose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      <span class="token literal-property property">algorithm</span><span class="token operator">:</span> <span class="token string">&#39;gzip&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ext</span><span class="token operator">:</span> <span class="token string">&#39;.gz&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用插件" tabindex="-1"><a class="header-anchor" href="#常用插件" aria-hidden="true">#</a> 常用插件</h3><blockquote><p>可以查看官方文档：<a href="https://vitejs.cn/plugins/" target="_blank" rel="noopener noreferrer">vitejs.cn/plugins/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></blockquote><ul><li><p><code>@vitejs/plugin-vue</code> 提供 <code>Vue 3</code> 单文件组件支持</p></li><li><p><code>@vitejs/plugin-vue-jsx</code> 提供 Vue 3 <code>JSX</code> 支持（通过 专用的 Babel 转换插件）</p></li><li><p><code>@vitejs/plugin-legacy</code> 为打包后的文件提供传统浏览器<code>兼容性</code>支持</p></li><li><p><code>unplugin-vue-components</code> 组件的按需自动导入</p></li><li><p><code>vite-plugin-compression</code> 使用 gzip 或者 brotli 来压缩资源</p></li></ul><h3 id="非常推荐使用的-hooks-库" tabindex="-1"><a class="header-anchor" href="#非常推荐使用的-hooks-库" aria-hidden="true">#</a> 非常推荐使用的 hooks 库</h3><blockquote><p>因为<code>vue3.x</code>和<code>react hooks</code>真的很像，所以就称为 <code>hooks</code></p></blockquote><p><code>VueUse</code>：<a href="https://vueuse.org/" target="_blank" rel="noopener noreferrer">vueuse.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p>看到这个库的第一眼，让我立马想到了 react 的 <code>ahooks</code></p><p><code>VueUse</code> 是一个基于 <code>Composition API</code> 的实用函数集合。通俗的来说，这就是一个<code>工具函数</code>包，它可以帮助你快速实现一些常见的功能，免得你自己去写，解决重复的工作内容。以及进行了基于 Composition API 的封装。让你在 vue3 中更加得心应手。</p><p>💡想要入手 vue3 的小伙伴，赶快学习起来吧！！！</p><p>💡最后给大家奉上仓库地址吧：<a href="https://github.com/chnjames/vite_vue3_ts" target="_blank" rel="noopener noreferrer">https://github.com/chnjames/vite_vue3_ts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: chnrural910@gmail.com">一点一木</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/blog/reference/vue3.html" class="" aria-label="Vue3 新特性及使用经验总结"><!--[--><!--]--> Vue3 新特性及使用经验总结 <!--[--><!--]--></a></span><span class="next"><a href="/blog/reference/git.html" class="" aria-label="Git操作手册"><!--[--><!--]--> Git操作手册 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.65b6550c.js" defer></script>
  </body>
</html>
